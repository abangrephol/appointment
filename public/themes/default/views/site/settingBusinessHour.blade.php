<div class="table-responsive">
    <table class="table table-bordered">
        <thead>
            <td>Weekday</td>
            <td>Business Hours</td>
        </thead>
        <tbody>
            <tr>
                <td class="col-sm-4">Sunday</td>
                <td class="form-horizontal day" id="Sun">
                    <div class="hour-close col-sm-8" style="display: none;">
                        <label class="control-label text-center">Closed for business</label>
                    </div>
                    <div class="hour-open">
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">From</label>
                        <span class="col-sm-9">
                            <select  class="hour-from form-control input-sm"></select>
                        </span>

                        </div>
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">To</label>
                        <span class="col-sm-9">
                            <select  class="hour-to form-control input-sm"></select>
                        </span>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <a class="day-toggle btn btn-sm btn-block btn-info open">Close</a>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Monday</td>
                <td class=" form-horizontal day" id="Mon">
                    <div class="hour-close col-sm-8" style="display: none;">
                        <label class="control-label text-center">Closed for business</label>
                    </div>
                    <div class="hour-open">
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">From</label>
                        <span class="col-sm-9">
                            <select  class="hour-from form-control input-sm"></select>
                        </span>

                        </div>
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">To</label>
                        <span class="col-sm-9">
                            <select  class="hour-to form-control input-sm"></select>
                        </span>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <a class="day-toggle btn btn-sm btn-block btn-info open">Close</a>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Tuesday</td>
                <td class=" form-horizontal day" id="Tue">
                    <div class="hour-close col-sm-8" style="display: none;">
                        <label class="control-label text-center">Closed for business</label>
                    </div>
                    <div class="hour-open">
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">From</label>
                        <span class="col-sm-9">
                            <select  class="hour-from form-control input-sm"></select>
                        </span>

                        </div>
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">To</label>
                        <span class="col-sm-9">
                            <select  class="hour-to form-control input-sm"></select>
                        </span>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <a class="day-toggle btn btn-sm btn-block btn-info open">Close</a>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Wednesday</td>
                <td class=" form-horizontal day" id="Wed">
                    <div class="hour-close col-sm-8" style="display: none;">
                        <label class="control-label text-center">Closed for business</label>
                    </div>
                    <div class="hour-open">
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">From</label>
                        <span class="col-sm-9">
                            <select  class="hour-from form-control input-sm"></select>
                        </span>

                        </div>
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">To</label>
                        <span class="col-sm-9">
                            <select  class="hour-to form-control input-sm"></select>
                        </span>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <a class="day-toggle btn btn-sm btn-block btn-info open">Close</a>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Thursday</td>
                <td class=" form-horizontal day" id="Thu">
                    <div class="hour-close col-sm-8" style="display: none;">
                        <label class="control-label text-center">Closed for business</label>
                    </div>
                    <div class="hour-open">
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">From</label>
                        <span class="col-sm-9">
                            <select  class="hour-from form-control input-sm"></select>
                        </span>

                        </div>
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">To</label>
                        <span class="col-sm-9">
                            <select  class="hour-to form-control input-sm"></select>
                        </span>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <a class="day-toggle btn btn-sm btn-block btn-info open">Close</a>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Friday</td>
                <td class=" form-horizontal day" id="Fri">
                    <div class="hour-close col-sm-8" style="display: none;">
                        <label class="control-label text-center">Closed for business</label>
                    </div>
                    <div class="hour-open">
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">From</label>
                        <span class="col-sm-9">
                            <select  class="hour-from form-control input-sm"></select>
                        </span>

                        </div>
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">To</label>
                        <span class="col-sm-9">
                            <select  class="hour-to form-control input-sm"></select>
                        </span>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <a class="day-toggle btn btn-sm btn-block btn-info open">Close</a>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Saturday</td>
                <td class="form-horizontal day" id="Sat">
                    <div class="hour-close col-sm-8" style="display: none;">
                        <label class="control-label text-center">Closed for business</label>
                    </div>
                    <div class="hour-open">
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">From</label>
                        <span class="col-sm-9">
                            <select  class="hour-from form-control input-sm"></select>
                        </span>

                        </div>
                        <div class="col-sm-4">
                            <label class="col-sm-3 control-label text-center">To</label>
                        <span class="col-sm-9">
                            <select  class="hour-to form-control input-sm"></select>
                        </span>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <a class="day-toggle btn btn-sm btn-block btn-info open">Close</a>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="row">
    <div class="col-sm-3"></div>
    <div class="col-sm-6">
        <a class="btn btn-primary btn-block save-bh">
            Save
        </a>
    </div>
    <div class="col-sm-3"></div>
</div>
<script>

    var start = moment().startOf('day');
    var end = moment().endOf('day');
    var hourArray = "";
    while(start.isBefore(end)){
        hourArray+="<option value='"+start.format('HH:mm')+"'>"+start.format('HH:mm A')+"</option>";
        start.add(30,'m');
    }
    $('.hour-from').each(function(){
        $(this).html(hourArray);
        $(this).val('08:00');
    })
    $('.hour-to').each(function(){
        $(this).html(hourArray);
        $(this).val('17:00');
    })
    var tmp = '{{ $hour }}';
    var hourData = [];
    if(tmp.length>0)
        hourData = JSON.parse(tmp);


    $('.day').each(function(){
        var id = $(this).attr('id');
        var el = $(this);
        var found = false;
        hourData.forEach(function(day){

            if(id == day.day)
            {
                el.find('.hour-close').hide();
                el.find('.hour-from').val(day.hourFrom);
                el.find('.hour-to').val(day.hourTo);
                el.find('.hour-open').show();
                el.find('.day-toggle').addClass('open').html('Close');
                found = true;
            }
            if(!found){
                el.find('.hour-close').show();
                el.find('.hour-open').hide();
                el.find('.day-toggle').removeClass('open').html('Open');
            }
        })
    })


    $('.day-toggle').on('click',function(){

        if($(this).hasClass('open')){
            $(this).closest('.day').find('.hour-close').show();
            $(this).closest('.day').find('.hour-open').hide();
            $(this).removeClass('open').html('Open');
        }else{

            $(this).closest('.day').find('.hour-close').hide();
            $(this).closest('.day').find('.hour-open').show();
            $(this).addClass('open').html('Close');
        }

    })
    $('.save-bh').on('click',function(){
        var bh = [];
        $('.day-toggle.open').each(function(){
            bh.push({
                day : $(this).closest('.day').attr('id'),
                hourFrom : $(this).closest('.day').find('.hour-from').val(),
                hourTo : $(this).closest('.day').find('.hour-to').val()
            });
        })
        var url = laroute.route('setting.hours');
        var posting = $.post(url,{data: JSON.stringify(bh) });
        posting.done(function(data){

        })
    })

</script>